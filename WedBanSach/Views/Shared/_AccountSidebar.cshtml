@using Microsoft.AspNetCore.Http
@using Microsoft.AspNetCore.Http
@{
    var activePage = ViewData["ActivePage"] as string;
    var userAvatar = Context.Session.GetString("UserAvatar");
    var userName = Context.Session.GetString("UserName") ?? "Tài khoản";
    var userEmail = Context.Session.GetString("UserEmail") ?? "Quản lý tài khoản";
    var avatarSrc = !string.IsNullOrEmpty(userAvatar) ? userAvatar : $"https://ui-avatars.com/api/?name={userName}&background=f8cdda&color=444";
}

<style>
    :root {
        --pink-main: #f8cdda;
        --pink-light: #fde7f0;
        --pink-hover: #f5b0c4;
        --white: #ffffff;
        --text-dark: #444444;
        --border-soft: #f1c6d9;
    }
    
    .sidebar-menu .nav-link {
        color: var(--text-dark);
        border-radius: 10px;
        padding: 12px 20px;
        margin-bottom: 5px;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        text-decoration: none;
    }
    
    .sidebar-menu .nav-link:hover {
        background-color: var(--pink-light);
        color: #C92127;
    }
    
    .sidebar-menu .nav-link.active {
        background-color: var(--pink-main);
        color: #C92127;
        font-weight: 600;
    }
</style>

<div class="col-lg-3 mb-4">
    <div class="card border-0 shadow-sm rounded-4 overflow-hidden">
        <div class="card-body p-4 text-center border-bottom bg-light">
            <img src="@avatarSrc" class="rounded-circle mb-3 shadow-sm object-fit-cover" width="80" height="80">
            <h5 class="fw-bold mb-0">@userName</h5>
            <small class="text-muted">@userEmail</small>
        </div>
        <div class="p-3">
            <nav class="nav flex-column sidebar-menu">
                <a class="nav-link @(activePage == "Profile" ? "active" : "")" asp-controller="Account" asp-action="Profile">
                    <i class="bi bi-person-fill me-2"></i> Hồ sơ cá nhân
                </a>
                <a class="nav-link @(activePage == "Addresses" ? "active" : "")" asp-controller="Account" asp-action="Addresses">
                    <i class="bi bi-geo-alt-fill me-2"></i> Địa chỉ giao hàng
                </a>
                <a class="nav-link @(activePage == "Notifications" ? "active" : "")" asp-controller="Account" asp-action="Notifications">
                    <i class="bi bi-bell-fill me-2"></i> Thông báo
                </a>
                <a class="nav-link @(activePage == "History" ? "active" : "")" asp-controller="Order" asp-action="History">
                    <i class="bi bi-bag-fill me-2"></i> Lịch sử mua hàng
                </a>
                <hr>
                <a class="nav-link text-danger" asp-controller="Account" asp-action="Logout">
                    <i class="bi bi-box-arrow-right me-2"></i> Đăng xuất
                </a>
            </nav>
        </div>
    </div>
</div>
