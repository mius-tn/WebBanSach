@{
    var currentController = ViewContext.RouteData.Values["controller"]?.ToString() ?? "";
    var currentAction = ViewContext.RouteData.Values["action"]?.ToString() ?? "";
    var userName = Context.Session.GetString("UserName") ?? "Admin";
    var isAdmin = Context.Session.GetString("IsAdmin") == "True";
}

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Admin Panel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css" />
    <link rel="stylesheet" href="~/css/admin.css" />
    @RenderSection("Styles", required: false)
</head>
<body>
    <div class="sidebar">
        <div class="sidebar-header">
            <h4><i class="bi bi-book"></i> BookStore Admin</h4>
        </div>
        <ul class="sidebar-menu">
            <li>
                <a href="@Url.Action("Index", "Admin")" class="@(currentController == "Admin" && currentAction == "Index" ? "active" : "")">
                    <i class="bi bi-speedometer2"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li>
                <a href="@Url.Action("Index", "AdminBooks")" class="@(currentController == "AdminBooks" ? "active" : "")">
                    <i class="bi bi-book"></i>
                    <span>Quản lý Sách</span>
                </a>
            </li>
            <li>
                <a href="@Url.Action("Index", "AdminCategories")" class="@(currentController == "AdminCategories" ? "active" : "")">
                    <i class="bi bi-tags"></i>
                    <span>Danh mục</span>
                </a>
            </li>
            <li>
                <a href="@Url.Action("Index", "AdminAuthors")" class="@(currentController == "AdminAuthors" ? "active" : "")">
                    <i class="bi bi-person-badge"></i>
                    <span>Tác giả</span>
                </a>
            </li>
            <li>
                <a href="@Url.Action("Index", "AdminPublishers")" class="@(currentController == "AdminPublishers" ? "active" : "")">
                    <i class="bi bi-building"></i>
                    <span>Nhà xuất bản</span>
                </a>
            </li>
            <li>
                <a href="@Url.Action("Index", "AdminOrders")" class="@(currentController == "AdminOrders" ? "active" : "")">
                    <i class="bi bi-cart-check"></i>
                    <span>Đơn hàng</span>
                </a>
            </li>
            <li>
                <a href="@Url.Action("Index", "AdminShippingMethods")" class="@(currentController == "AdminShippingMethods" ? "active" : "")">
                    <i class="bi bi-truck"></i>
                    <span>Quản lý Vận chuyển</span>
                </a>
            </li>
            <li>
                <a href="@Url.Action("Index", "AdminPayments")" class="@(currentController == "AdminPayments" ? "active" : "")">
                    <i class="bi bi-credit-card"></i>
                    <span>Thanh toán</span>
                </a>
            </li>
            @if (isAdmin)
            {
                <li>
                    <a href="@Url.Action("Index", "AdminUsers")" class="@(currentController == "AdminUsers" ? "active" : "")">
                        <i class="bi bi-people"></i>
                        <span>Người dùng</span>
                    </a>
                </li>
            }
            <li>
                <a href="@Url.Action("Index", "AdminReviews")" class="@(currentController == "AdminReviews" ? "active" : "")">
                    <i class="bi bi-star"></i>
                    <span>Đánh giá</span>
                </a>
            </li>
            <li>
                <a href="@Url.Action("Index", "AdminPromotions")" class="@(currentController == "AdminPromotions" ? "active" : "")">
                    <i class="bi bi-percent"></i>
                    <span>Khuyến mãi</span>
                </a>
            </li>
            <li>
                <a href="@Url.Action("Index", "AdminInventory")" class="@(currentController == "AdminInventory" ? "active" : "")">
                    <i class="bi bi-box-seam"></i>
                    <span>Tồn kho</span>
                </a>
            </li>
            <li>
                <a href="@Url.Action("Index", "AdminChat")" class="@(currentController == "AdminChat" ? "active" : "")">
                    <i class="bi bi-chat-dots"></i>
                    <span>Chat Realtime</span>
                </a>
            </li>
            <li>
                <a href="@Url.Action("Index", "AdminReports")" class="@(currentController == "AdminReports" ? "active" : "")">
                    <i class="bi bi-graph-up"></i>
                    <span>Báo cáo</span>
                </a>
            </li>
        </ul>
    </div>
    <div class="main-content">
        <div class="top-navbar">
            <div>
                <h5 class="mb-0">@ViewData["Title"]</h5>
            </div>
            <div class="d-flex align-items-center gap-3">
                <span class="text-muted"><i class="bi bi-person-circle"></i> @userName</span>
                <a href="@Url.Action("Logout", "Account")" class="btn btn-sm btn-outline-danger">
                    <i class="bi bi-box-arrow-right"></i> Đăng xuất
                </a>
            </div>
        </div>
        <div class="content-area">
            @RenderBody()
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    @RenderSection("Scripts", required: false)
</body>
</html>
